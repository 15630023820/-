"use strict";(self.webpackChunkfinance_manager=self.webpackChunkfinance_manager||[]).push([[15],{8015:function(e,t,a){a.r(t),a.d(t,{default:function(){return s}});const r=Object.freeze([{label:"用户名",prop:"account"},{label:"密码",prop:"password"},{label:"创建时间",prop:"reg_time",filter:"convertDate"},{label:"创建者",prop:"creator"},{label:"权限分配",prop:"role_name",filter:"common&role_name"}].map((e=>(e.align="center",e))));var i=a(8905),n=a(4525),o={computed:{showTable(){return this.tableData.slice(this.start,this.end)}},mixins:[i.Z,n.Z],data(){return{start:0,end:20,columns:r,configPager:{}}},methods:{changeCurrent(e){this.start=20*(e-1),this.end=this.start+20},getRequestOption(){return{read:{url:"/user/list?type=new",method:"get"}}}}},s=(0,a(1001).Z)(o,(function(){var e=this,t=e._self._c;return t("div",[t("GQuery",{on:{queryChange:e.setQuery}}),t("GTable",{attrs:{tableData:e.showTable,columns:e.columns,pager:e.configPager,config:{usePager:!0}},on:{handleCurrentChange:e.changeCurrent}})],1)}),[],!1,null,null,null).exports},4525:function(e,t,a){var r=a(4734);t.Z={data(){return{tableData:[],isLoading:!1,queryOption:null}},beforeDestroy(){this.$options.name},async created(){this.$options.name,await this.checkOption(),this.loadByPage()},methods:{async doSubmit(e){await(0,r.Z)({url:this.queryOption.submit.url,method:this.queryOption.submit.method,...e});this.loadByPage()},selectionChange(e){},async checkOption(){if(this.queryOption=await this.getRequestOption(),!this.queryOption)throw new Error("混入CRUD时，必须重写getRequestOption方法，且返回值不为false等..")},async doDelete(e){await(0,r.Z)({url:this.queryOption.delete.url+e,method:this.queryOption.delete.method});this.loadByPage()},async doUpdate(e,t=""){await(0,r.Z)({url:this.queryOption.update.url+t,method:this.queryOption.update.method,...e});this.loadByPage()},getRequestOption(){return!1},async loadByPage(){this.isLoading=!0;var e=await(0,r.Z)({url:this.queryOption.read.url,method:this.queryOption.read.method,params:this.pager});this.isLoading=!1,this.tableData=Object.freeze(e?.data?.data?.list),this.setTotal(e.data?.data.rows)}}}},8905:function(e,t){t.Z={data(){return{pager:{pageNo:1,pageSize:10,name:""}}},methods:{setQuery(e){this.pager.name=e,this.loadByPage()},doHandleSizeChange(e){this.pager.pageSize=e,this.pager.pageNo=1,this.loadByPage()},doHandleCurrentChange(e){this.pager.pageNo=e,this.loadByPage()},setTotal(e){if(!this.configPager)throw new Error("data必须声明configPager并传递给GTable");this.$set(this.configPager,"total",e)}}}}}]);