"use strict";(self.webpackChunkfinance_manager=self.webpackChunkfinance_manager||[]).push([[2],{2002:function(e,t,a){a.r(t),a.d(t,{default:function(){return l}});var n=a(7416),i=a(4525),o=a(8905),r=a(4011),s={methods:{async pass(e){await(0,r.AK)(e),this.loadByPage()},async reject(e){await(0,r.ey)(e),this.loadByPage()},showInfo(e){this.editorForm=(0,n.Y)(e),this.isShow=!0},getRequestOption(){return{read:{url:"/approve/first/list",method:"get"}}}},mixins:[i.Z,o.Z],data(){return{editorForm:{},isExist:!1,isShow:!1,columns:n.z,configPager:{currentPage:1,pageSizes:[10,20,30,40],pageSize:10,layout:"total, sizes, prev, pager, next, jumper",total:400}}}},l=(0,a(1001).Z)(s,(function(){var e=this,t=e._self._c;return t("div",[t("GQuery",{on:{queryChange:e.setQuery}}),t("GTable",{attrs:{tableData:e.tableData,columns:e.columns,pager:e.configPager,config:{index:!1}},on:{handleSizeChange:e.doHandleSizeChange,handleCurrentChange:e.doHandleCurrentChange,"selection-change":e.selectionChange},scopedSlots:e._u([{key:"operation",fn:function(a){return[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.showInfo(a)}}},[e._v("查看")]),t("GEbutton",{attrs:{confirm:`是否拒绝${a.name}的申请?`,type:"danger"},on:{submit:function(t){return e.reject(a.id)}}},[e._v("拒绝")]),t("GEbutton",{attrs:{type:"success",confirm:`是否【${a.name}】确认提交审核?`},on:{submit:function(t){return e.pass(a.id)}}},[e._v("提交审核")])]}}])}),t("el-dialog",{attrs:{title:"初审审批-查看详情",visible:e.isShow},on:{"update:visible":function(t){e.isShow=t},open:function(t){e.isExist=!0},closed:function(t){e.isExist=!1}}},[e.isExist?t("GFormCreator",{attrs:{config:e.editorForm}},[t("el-button",{on:{click:function(t){e.isShow=!1}}},[e._v("取消")])],1):e._e()],1)],1)}),[],!1,null,null,null).exports},4011:function(e,t,a){a.d(t,{AK:function(){return r},Qe:function(){return l},UO:function(){return u},Uw:function(){return s},ey:function(){return o},tX:function(){return i},w4:function(){return d}});var n=a(4734);const i=e=>n.Z.post("/loan/create",e),o=e=>n.Z.post("/approve/first/reject",{appId:e,loanId:e}),r=e=>n.Z.post("/approve/first/pass",{appId:e,loanId:e}),s=e=>n.Z.post("/approve/end/reject",{appId:e,loanId:e}),l=e=>n.Z.post("/approve/end/pass",{appId:e,loanId:e}),u=e=>n.Z.get("/contract/download",{params:{id:e}}).then((e=>e.data.data.url)),d=e=>{const t=e.replace("/api","");return n.Z.get(t,{responseType:"blob"})}},4525:function(e,t,a){var n=a(4734);t.Z={data(){return{tableData:[],isLoading:!1,queryOption:null}},beforeDestroy(){this.$options.name},async created(){this.$options.name,await this.checkOption(),this.loadByPage()},methods:{async doSubmit(e){await(0,n.Z)({url:this.queryOption.submit.url,method:this.queryOption.submit.method,...e});this.loadByPage()},selectionChange(e){},async checkOption(){if(this.queryOption=await this.getRequestOption(),!this.queryOption)throw new Error("混入CRUD时，必须重写getRequestOption方法，且返回值不为false等..")},async doDelete(e){await(0,n.Z)({url:this.queryOption.delete.url+e,method:this.queryOption.delete.method});this.loadByPage()},async doUpdate(e,t=""){await(0,n.Z)({url:this.queryOption.update.url+t,method:this.queryOption.update.method,...e});this.loadByPage()},getRequestOption(){return!1},async loadByPage(){this.isLoading=!0;var e=await(0,n.Z)({url:this.queryOption.read.url,method:this.queryOption.read.method,params:this.pager});this.isLoading=!1,this.tableData=Object.freeze(e?.data?.data?.list),this.setTotal(e.data?.data.rows)}}}},8905:function(e,t){t.Z={data(){return{pager:{pageNo:1,pageSize:10,name:""}}},methods:{setQuery(e){this.pager.name=e,this.loadByPage()},doHandleSizeChange(e){this.pager.pageSize=e,this.pager.pageNo=1,this.loadByPage()},doHandleCurrentChange(e){this.pager.pageNo=e,this.loadByPage()},setTotal(e){if(!this.configPager)throw new Error("data必须声明configPager并传递给GTable");this.$set(this.configPager,"total",e)}}}},7416:function(e,t,a){a.d(t,{Y:function(){return s},z:function(){return o}});var n=a(311),i=a.n(n);const o=Object.freeze([{prop:"birthday",label:"出生日期",filter:"convertDate"},{prop:"name",label:"姓名"},{label:"身份证",prop:"identity_card"},{label:"操作",prop:"operation",width:300}].map((e=>({...e,align:"center"}))));i().filter("common")("man","sex");let r=i().filter.bind(i());const s=function(e){return{fields:[[{label:"id",value:e.id,key:"id"}],[{label:"姓名",value:e.name,key:"name"}],[{label:"出生日期",value:r("convertDate")(e.birthday),key:"birthday"}],[{label:"性别",value:r("common")(e.sex,"sex"),key:"sex"}],[{label:"教育程度",value:r("common")(e.education,"education"),key:"education"}],[{label:"地址",value:e.address1,key:"address1"}],[{label:"手机号",value:e.mobile_phone,key:"mobile_phone"}],[{label:"身份证",value:e.identity_card,key:"identity_card"}]].map((e=>(e[0].type="text",e[0].attrs={disabled:!0},e[0].colspan=22,e)))}}}}]);