"use strict";(self.webpackChunkfinance_manager=self.webpackChunkfinance_manager||[]).push([[250],{5250:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});const i=Object.freeze([{prop:"birthday",label:"出生日期",width:120,filter:"convertDate"},{prop:"name",label:"姓名",width:120},{label:"性别",prop:"sex",filter:"common"},{prop:"education",label:"教育程度",filter:"common"},{prop:"address1",label:"居住地址"},{prop:"mobile_phone",label:"手机号"},{label:"申请状态",prop:"status",width:100},{label:"操作",prop:"operation",width:300},{label:"配送信息",children:[{label:"地址",children:[{label:"省份",prop:"name"},{label:"市区"},{label:"街道",prop:"address"}]}]},{width:400,label:"显示html",prop:"test",filter:"common&name",formatter(e){return`<div>\n            <h2>${e.name}这是自定义html</h2>\n            <button>按钮</button>\n          </div>`}}].map((e=>({...e,align:"center"}))));var n=a(8905),o=a(4525),r=a(311),l=a.n(r);function s(e,t,a){e.forEach((e=>{e.forEach((e=>{e.key===t&&l().set(e,"value",a)}))}))}var u=a(9162),d={mixins:[o.Z,n.Z],methods:{doSubmitData(e,t){this.doSubmit({data:{id:e}})},editing(e){this.dialogVisible=!0,this.currentRow=e,((e,t)=>{const{fields:a,cards:i}=t;for(let t in e){let n=e[t];a&&s(a,t,n),i&&i.forEach((e=>{s(e.items,t,n)}))}})(e,this.editFormConfig)},updateForm(){const e=this.$refs.editForm.getData();this.doUpdate({data:{...this.currentRow,...e}}),this.cancelDialog()},cancelDialog(){this.dialogVisible=!1},getRequestOption(){return{read:{url:"/loan/list",method:"get"},delete:{url:"/loan/delete/",method:"delete"},update:{url:"/loan/update",method:"put"},submit:{url:"/loan/submitToApprove",method:"post"}}},async deleteLoan(e,t){await this.$gconfirm(`是否确定删除【${t}】?`)&&this.doDelete(e)}},data(){return{configPager:{},editFormConfig:{fields:[[{label:"姓名",value:"111",type:"text",key:"name"}],[{label:"性别",value:"0",type:"select",key:"sex",options:u.dM}]],rules:{name:[{required:!0,message:"请输入姓名",triggle:"blur"}],sex:[{required:!0,message:"请选择性别",triggle:"blur"}]}},childExist:!1,dialogVisible:!1,tableConfig:{usePager:!0,multipleSelection:!0},columns:i}}},c=(0,a(1001).Z)(d,(function(){var e=this,t=e._self._c;return t("div",[t("GQuery",{on:{queryChange:e.setQuery}}),t("GQuery",{scopedSlots:e._u([{key:"btn",fn:function({query:a}){return[t("el-button",{attrs:{type:"primary"},on:{click:t=>e.setQuery(a)}},[e._v("搜索"+e._s(a))])]}}])}),t("GTable",{attrs:{tableData:e.tableData,columns:e.columns,pager:e.configPager,config:e.tableConfig},on:{handleSizeChange:e.doHandleSizeChange,handleCurrentChange:e.doHandleCurrentChange,"selection-change":e.selectionChange},scopedSlots:e._u([{key:"status",fn:function(a){return[t("el-tag",{attrs:{type:e._f("common")(a.status,"statusColor")}},[e._v(e._s(e._f("common")(a.status,"status")))])]}},{key:"operation",fn:function(a){return[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editing(a)}}},[e._v("编辑")]),t("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.deleteLoan(a.id,a.name)}}},[e._v("删除")]),t("GEbutton",{attrs:{type:"success",confirm:`是否【${a.name}】确认提交审核?`},on:{submit:function(t){return e.doSubmitData(a.id,t)}}},[e._v("提交审核")])]}},{key:"append",fn:function(){return[t("button",[e._v("我是行尾")])]},proxy:!0}])}),t("el-dialog",{attrs:{title:"申请管理-编辑",visible:e.dialogVisible,width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t},open:function(t){e.childExist=!0},closed:function(t){e.childExist=!1}}},[e.childExist?t("GFormCreator",{ref:"editForm",attrs:{config:e.editFormConfig}},[t("div",[t("GEbutton",{attrs:{confirm:"是否确认保存"},on:{submit:e.updateForm}},[e._v("保存")]),t("el-button",{on:{click:e.cancelDialog}},[e._v("取消")])],1)]):e._e()],1)],1)}),[],!1,null,"5c04f6bc",null).exports},9162:function(e,t,a){a.d(t,{Vx:function(){return n},Zu:function(){return r},dM:function(){return i},oV:function(){return o}});const i=[{value:"man",text:"男"},{value:"woman",text:"女"}],n=[{value:"education",text:"教育"},{value:"finance",text:"金融"}],o=[{value:"married",text:"已婚"},{value:"unmarried",text:"未婚"}],r=[{value:"college",text:"大学"},{value:"highschool",text:"高中"}]},4525:function(e,t,a){var i=a(4734);t.Z={data(){return{tableData:[],isLoading:!1,queryOption:null}},beforeDestroy(){this.$options.name},async created(){this.$options.name,await this.checkOption(),this.loadByPage()},methods:{async doSubmit(e){await(0,i.Z)({url:this.queryOption.submit.url,method:this.queryOption.submit.method,...e});this.loadByPage()},selectionChange(e){},async checkOption(){if(this.queryOption=await this.getRequestOption(),!this.queryOption)throw new Error("混入CRUD时，必须重写getRequestOption方法，且返回值不为false等..")},async doDelete(e){await(0,i.Z)({url:this.queryOption.delete.url+e,method:this.queryOption.delete.method});this.loadByPage()},async doUpdate(e,t=""){await(0,i.Z)({url:this.queryOption.update.url+t,method:this.queryOption.update.method,...e});this.loadByPage()},getRequestOption(){return!1},async loadByPage(){this.isLoading=!0;var e=await(0,i.Z)({url:this.queryOption.read.url,method:this.queryOption.read.method,params:this.pager});this.isLoading=!1,this.tableData=Object.freeze(e?.data?.data?.list),this.setTotal(e.data?.data.rows)}}}},8905:function(e,t){t.Z={data(){return{pager:{pageNo:1,pageSize:10,name:""}}},methods:{setQuery(e){this.pager.name=e,this.loadByPage()},doHandleSizeChange(e){this.pager.pageSize=e,this.pager.pageNo=1,this.loadByPage()},doHandleCurrentChange(e){this.pager.pageNo=e,this.loadByPage()},setTotal(e){if(!this.configPager)throw new Error("data必须声明configPager并传递给GTable");this.$set(this.configPager,"total",e)}}}}}]);